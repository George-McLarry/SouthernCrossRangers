(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3],{3716:function(e,t,a){Promise.resolve().then(a.bind(a,6721))},6721:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return u}});var s=a(7437),r=a(2265),n=a(9376),c=a(2141);let i={async getContentSections(){let e=(0,c.i3)(),{data:t,error:a}=await e.from("content_sections").select("*").order("section_name");if(a)throw a;return t},async updateContentSection(e,t){let a=(0,c.i3)(),{data:s,error:r}=await a.from("content_sections").update({content:t,updated_at:new Date().toISOString()}).eq("id",e).select();if(r)throw r;return s[0]},async getMusicTracks(){let e=(0,c.i3)(),{data:t,error:a}=await e.from("music_tracks").select("*").order("created_at",{ascending:!1});if(a)throw a;return t},async addMusicTrack(e){let t=(0,c.i3)(),{data:a,error:s}=await t.from("music_tracks").insert([e]).select();if(s)throw s;return a[0]},async updateMusicTrack(e,t){let a=(0,c.i3)(),{data:s,error:r}=await a.from("music_tracks").update(t).eq("id",e).select();if(r)throw r;return s[0]},async deleteMusicTrack(e){let t=(0,c.i3)(),{error:a}=await t.from("music_tracks").delete().eq("id",e);if(a)throw a;return!0}};var l=a(7370),o=a(9299),d=a(8349);function u(){let[e,t]=(0,r.useState)("content"),[a,u]=(0,r.useState)([]),[p,g]=(0,r.useState)([]),[j,y]=(0,r.useState)(!0),[b,f]=(0,r.useState)(""),k=(0,n.useRouter)();(0,r.useEffect)(()=>{(async()=>{var e;let{data:{session:t}}=await c.OQ.auth.getSession();if(!t||(null===(e=t.user.user_metadata)||void 0===e?void 0:e.role)!=="admin"){k.push("/login");return}N()})()},[k]);let N=async()=>{try{let[e,t]=await Promise.all([i.getContentSections(),i.getMusicTracks()]);u(e),g(t)}catch(e){console.error("Error loading data:",e),f("Error loading data")}finally{y(!1)}},v=async()=>{await c.OQ.auth.signOut(),k.push("/")},w=async(e,t)=>{try{await i.updateContentSection(e,t),u(a=>a.map(a=>a.id===e?{...a,content:t}:a)),f("Content updated successfully!")}catch(e){console.error("Error updating content:",e),f("Error updating content")}},S=async e=>{try{let t=await i.addMusicTrack(e);g(e=>[t,...e]),f("Track added successfully!")}catch(e){console.error("Error adding track:",e),f("Error adding track")}},C=async(e,t)=>{try{let a=await i.updateMusicTrack(e,t);g(t=>t.map(t=>t.id===e?a:t)),f("Track updated successfully!")}catch(e){console.error("Error updating track:",e),f("Error updating track")}},E=async e=>{try{await i.deleteMusicTrack(e),g(t=>t.filter(t=>t.id!==e)),f("Track deleted successfully!")}catch(e){console.error("Error deleting track:",e),f("Error deleting track")}};return j?(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center",style:{backgroundImage:"url('https://media.istockphoto.com/id/1137996207/photo/brown-wood-texture-dark-wooden-abstract-background.jpg?s=612x612&w=0&k=20&c=qZS2TJ_1fQ9xRmcnqkyEIbBlT-5K_ShnRKPCzwfOcQI=')",backgroundSize:"cover",backgroundPosition:"center",backgroundAttachment:"fixed"},children:(0,s.jsx)(l.ParchmentSection,{className:"p-8",children:(0,s.jsx)("p",{className:"body-text",children:"Loading admin panel..."})})}):(0,s.jsxs)("div",{className:"min-h-screen",style:{backgroundImage:"url('https://media.istockphoto.com/id/1137996207/photo/brown-wood-texture-dark-wooden-abstract-background.jpg?s=612x612&w=0&k=20&c=qZS2TJ_1fQ9xRmcnqkyEIbBlT-5K_ShnRKPCzwfOcQI=')",backgroundSize:"cover",backgroundPosition:"center",backgroundAttachment:"fixed"},children:[(0,s.jsx)(o.Header,{}),(0,s.jsxs)("main",{className:"max-w-7xl mx-auto px-4 py-8",children:[(0,s.jsxs)("div",{className:"text-center mb-8",children:[(0,s.jsx)("h1",{className:"header-1 text-4xl mb-4",children:"Admin Panel"}),(0,s.jsx)("p",{className:"body-text",children:"Manage your website content and music tracks"})]}),b&&(0,s.jsx)(l.ParchmentSection,{className:"mb-6",children:(0,s.jsx)("p",{className:"body-text ".concat(b.includes("Error")?"text-red-600":"text-green-600"),children:b})}),(0,s.jsx)("div",{className:"flex justify-center mb-8",children:(0,s.jsxs)("div",{className:"flex bg-gray-200 rounded-lg p-1",children:[(0,s.jsx)("button",{onClick:()=>t("content"),className:"px-6 py-2 rounded-md transition-colors ".concat("content"===e?"bg-gold text-gray-900 font-bold":"text-gray-600 hover:text-gray-900"),children:"Website Content"}),(0,s.jsx)("button",{onClick:()=>t("music"),className:"px-6 py-2 rounded-md transition-colors ".concat("music"===e?"bg-gold text-gray-900 font-bold":"text-gray-600 hover:text-gray-900"),children:"Music Tracks"})]})}),"content"===e&&(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)("h2",{className:"header-2 text-2xl text-center",children:"Edit Website Content"}),a.map(e=>(0,s.jsx)(x,{section:e,onUpdate:w},e.id))]}),"music"===e&&(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("h2",{className:"header-2 text-2xl",children:"Music Tracks"}),(0,s.jsx)(m,{onAdd:S})]}),p.map(e=>(0,s.jsx)(h,{track:e,onUpdate:C,onDelete:E},e.id))]}),(0,s.jsx)("div",{className:"text-center mt-12",children:(0,s.jsx)("button",{onClick:v,className:"gold-button px-6 py-2",children:"Logout"})})]}),(0,s.jsx)(d.Footer,{})]})}function x(e){let{section:t,onUpdate:a}=e,[n,c]=(0,r.useState)(t.content),[i,o]=(0,r.useState)(!1);return(0,s.jsxs)(l.ParchmentSection,{children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,s.jsx)("h3",{className:"header-2 text-xl",children:t.section_name}),(0,s.jsx)("button",{onClick:()=>o(!i),className:"gold-button px-4 py-2",children:i?"Cancel":"Edit"})]}),i?(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("textarea",{value:n,onChange:e=>c(e.target.value),className:"form-textarea",rows:6}),(0,s.jsx)("button",{onClick:()=>{a(t.id,n),o(!1)},className:"gold-button px-4 py-2",children:"Save Changes"})]}):(0,s.jsx)("div",{className:"body-text whitespace-pre-wrap",children:n})]})}function m(e){let{onAdd:t}=e,[a,n]=(0,r.useState)(""),[c,i]=(0,r.useState)(""),[o,d]=(0,r.useState)(""),[u,x]=(0,r.useState)("");return(0,s.jsxs)(l.ParchmentSection,{children:[(0,s.jsx)("h3",{className:"header-2 text-xl mb-4",children:"Add New Track"}),(0,s.jsxs)("form",{onSubmit:e=>{e.preventDefault(),t({title:a,artist:c,url:o,description:u}),n(""),i(""),d(""),x("")},className:"space-y-4",children:[(0,s.jsx)("input",{type:"text",placeholder:"Track Title",value:a,onChange:e=>n(e.target.value),className:"form-input",required:!0}),(0,s.jsx)("input",{type:"text",placeholder:"Artist",value:c,onChange:e=>i(e.target.value),className:"form-input",required:!0}),(0,s.jsx)("input",{type:"url",placeholder:"Audio URL",value:o,onChange:e=>d(e.target.value),className:"form-input",required:!0}),(0,s.jsx)("textarea",{placeholder:"Description (optional)",value:u,onChange:e=>x(e.target.value),className:"form-textarea",rows:3}),(0,s.jsx)("button",{type:"submit",className:"gold-button px-4 py-2",children:"Add Track"})]})]})}function h(e){let{track:t,onUpdate:a,onDelete:n}=e,[c,i]=(0,r.useState)(!1),[o,d]=(0,r.useState)(t.title),[u,x]=(0,r.useState)(t.artist),[m,h]=(0,r.useState)(t.url),[p,g]=(0,r.useState)(t.description||"");return(0,s.jsxs)(l.ParchmentSection,{children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"header-2 text-lg",children:t.title}),(0,s.jsxs)("p",{className:"body-text text-sm",children:["by ",t.artist]})]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("button",{onClick:()=>i(!c),className:"gold-button px-3 py-1 text-sm",children:c?"Cancel":"Edit"}),(0,s.jsx)("button",{onClick:()=>n(t.id),className:"px-3 py-1 bg-red-600 text-white rounded text-sm hover:bg-red-700",children:"Delete"})]})]}),c?(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("input",{type:"text",value:o,onChange:e=>d(e.target.value),className:"form-input",placeholder:"Track Title"}),(0,s.jsx)("input",{type:"text",value:u,onChange:e=>x(e.target.value),className:"form-input",placeholder:"Artist"}),(0,s.jsx)("input",{type:"url",value:m,onChange:e=>h(e.target.value),className:"form-input",placeholder:"Audio URL"}),(0,s.jsx)("textarea",{value:p,onChange:e=>g(e.target.value),className:"form-textarea",placeholder:"Description",rows:3}),(0,s.jsx)("button",{onClick:()=>{a(t.id,{title:o,artist:u,url:m,description:p}),i(!1)},className:"gold-button px-4 py-2",children:"Save Changes"})]}):(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("p",{className:"body-text",children:[(0,s.jsx)("strong",{children:"URL:"})," ",(0,s.jsx)("a",{href:m,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:m})]}),p&&(0,s.jsxs)("p",{className:"body-text",children:[(0,s.jsx)("strong",{children:"Description:"})," ",p]})]})]})}},2141:function(e,t,a){"use strict";a.d(t,{OQ:function(){return c},i3:function(){return i}});var s=a(1545),r=a(257);let n="https://taxzgwwkaaozbcxvnsgs.supabase.co",c=(0,s.eI)(n,"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InRheHpnd3drYWFvemJjeHZuc2dzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjEwOTcxOTgsImV4cCI6MjA3NjY3MzE5OH0.vfCCGlrLAGRpX1PvXzYCsxMzYk5Xv6S9K_CDGacc4gY"),i=()=>(0,s.eI)(n,r.env.SUPABASE_SERVICE_ROLE_KEY)}},function(e){e.O(0,[448,545,977,971,117,744],function(){return e(e.s=3716)}),_N_E=e.O()}]);